(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b27e1b8"],{1:function(t,e){},"3d1a":function(t,e,s){},9406:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard-container"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"data-self-line-height",attrs:{span:6}},[s("div",{on:{click:t.sendSocketMsg}},[s("el-button",{attrs:{type:"primary"}},[t._v("获取主机信息")])],1)]),t._v(" "),s("el-col",{staticClass:"data-self-line-height data-self-text-center",attrs:{span:6}},[s("div",{staticClass:"data-self-time-font-size"},[s("date-times")],1)]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"data-self-webstatus"},[s("h2",[t._v("\n          信道状态:\n          "),s("el-button",{staticClass:"data-self-webstatus-icon",class:{"data-self-webstatus-icon-color-success":t.webStatus,"data-self-webstatus-icon-color-failed":!t.webStatus},attrs:{circle:"",size:"medium"}})],1)])])],1),t._v(" "),s("dash-table")],1)},a=[],i=s("cebc"),r=s("2f62"),l=s("b775");function o(t){return Object(l["a"])({url:"/api/ansible_task",method:"post",data:t})}s("5132"),s("252a"),s("3e8f");var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.hostInfoListCom,"max-height":"500","element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"IP",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.host)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"序列号",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.result.success.ansible_product_serial))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"内存",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.result.success.total_memory)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{"class-name":"status-col",label:"Status",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t._f("statusFilter")(e.row.display_status)}},[t._v(t._s(e.row.display_status))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"异常原因",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("errorFilter")(e.row.result))+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"created_at",label:"耗时",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{staticClass:"el-icon-time"}),t._v(" "),s("span",[t._v("4s")])]}}])})],1)],1)},u=[],d=(s("ac6a"),s("456d"),{filters:{statusFilter:function(t){var e={success:"success",failed:"failed",unreachable:"danger"};return e[t]},errorFilter:function(t){return 0!==Object.keys(t.failed).length?t.failed:0!==Object.keys(t.unreachable).length?t.unreachable:void 0}},data:function(){return{hostInfoList:[],listLoading:!0}},created:function(){this.listLoading=!1},computed:{userId:function(){return this.$store.getters.userId},hostInfoListCom:function(){if("{}"==JSON.stringify(this.$store.getters.hostInfo))console.log("get default hostinfo");else{var t={},e=this.$store.getters.hostInfo;t=e,0!==Object.keys(e.result.success).length?t["display_status"]="success":0!==Object.keys(e.result.failed).length?t["display_status"]="failed":0!==Object.keys(e.result.unreachable).length&&(t["display_status"]="unreachable"),this.hostInfoList.unshift(t)}return this.hostInfoList}},methods:{}}),f=d,h=s("2877"),m=Object(h["a"])(f,c,u,!1,null,null,null),b=m.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"timer"},[s("div",{ref:"startTimer"})])},p=[],v={name:"Timer",data:function(){return{timer:"",content:"",hour:0,minutes:0,seconds:0}},created:function(){this.timer=setInterval(this.startTimer,1e3)},destroyed:function(){clearInterval(this.timer)},methods:{startTimer:function(){this.seconds+=1,this.seconds>=60&&(this.seconds=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.$refs.startTimer.innerHTML=(this.minutes<10?"0"+this.minutes:this.minutes)+":"+(this.seconds<10?"0"+this.seconds:this.seconds)}}},g=v,w=Object(h["a"])(g,_,p,!1,null,null,null),y=w.exports,I=s("8055"),k=s.n(I),S={name:"Dashboard",data:function(){return{text:"这是首页",hostInfo:"",date:new Date}},components:{dashTable:b,DateTimes:y},computed:Object(i["a"])({},Object(r["b"])(["name","webStatus","userId"])),mounted:function(){var t=this,e=k.a.connect("http://127.0.0.1:5000/events");e.emit("connect"),e.on("status",function(e){t.$store.dispatch({type:"user/changeStatus",status:e.status})}),e.on("userid",function(e){t.$store.dispatch({type:"user/changeUserId",datas:e})}),e.on("celerystatus",function(e){t.hostInfo=e,t.$store.dispatch({type:"user/changeHostInfo",hostInfo:e})});var s=this;this.timer=setInterval(function(){s.date=new Date},1e3)},methods:{sendSocketMsg:function(){var t={elementid:"progressid",userid:this.$store.getters.userId,ansible_module_name:"setup",ansible_module_args:""};o(t).then(function(t){var e=t;console.log(e),resolve(e)}).catch(function(t){})}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},j=S,C=(s("d353"),Object(h["a"])(j,n,a,!1,null,"564f4177",null));e["default"]=C.exports},d353:function(t,e,s){"use strict";var n=s("3d1a"),a=s.n(n);a.a}}]);